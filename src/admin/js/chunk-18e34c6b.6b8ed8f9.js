(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18e34c6b"],{"35e0":function(t,e,a){},"3e16":function(t,e,a){"use strict";a("35e0")},cba6:function(t,e,a){"use strict";a.r(e);a("7f7f");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"filter-container"},[t.permission.pass?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"filter-item",attrs:{disabled:0===t.selectedIds.length,type:"warning"},on:{click:t.passInfo}},[t._v("批量受理")]):t._e(),t.permission.reject?e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"filter-item",attrs:{disabled:0===t.selectedIds.length,type:"danger"},on:{click:t.rejectInfo}},[t._v("批量驳回")]):t._e(),e("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{clearable:"",placeholder:"名称"},model:{value:t.map.keyword,callback:function(e){t.$set(t.map,"keyword",e)},expression:"map.keyword"}}),e("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"状态"},model:{value:t.map.status,callback:function(e){t.$set(t.map,"status",e)},expression:"map.status"}},t._l(t.statusList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.label,value:t.value}})})),1),e("region",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{value:t.map.region,showAllLevels:!1,placeholder:"所在区域"},on:{"update:value":function(e){return t.$set(t.map,"region",e)}}}),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),e("el-dropdown",{staticClass:"filter-item",attrs:{trigger:"click",disabled:t.exportLoading},on:{command:t.exportExcel}},[e("el-button",{attrs:{type:"primary"}},[t._v("\n        导出"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:0}},[t._v("导出本页")]),e("el-dropdown-item",{attrs:{command:1}},[t._v("导出全部")])],1)],1)],1),e("el-table",{attrs:{border:"","highlight-current-row":"","row-key":"id",data:t.tableList},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"60"}}),e("el-table-column",{attrs:{prop:"name",label:"图片",width:"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.images_text.length>0?e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{fit:"cover",src:a.row.images_text[0],"preview-src-list":a.row.images_text}}),a.row.images_text.length>1?e("span",[t._v("+"+t._s(a.row.images_text.length-1))]):t._e()],1):t._e()]}}])}),e("el-table-column",{attrs:{prop:"name",label:"单位名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n        "+t._s(a.row.name)+"\n        "),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showOldInfo(a.row)}}},[t._v("原信息")])]}}])}),e("el-table-column",{attrs:{prop:"linkman",label:"联系人",width:"120"}}),e("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"120"}}),e("el-table-column",{attrs:{prop:"tel",label:"服务商电话",width:"120"}}),e("el-table-column",{attrs:{prop:"lat",label:"地图坐标"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.lat)+","+t._s(a.row.lng))])]}}])}),e("el-table-column",{attrs:{prop:"lat",label:"所在地区"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.province)+" "+t._s(a.row.city)+" "+t._s(a.row.county)+" "+t._s(a.row.street))])]}}])}),e("el-table-column",{attrs:{prop:"address",label:"详细地址"}}),e("el-table-column",{attrs:{prop:"create_time",label:"提交时间",width:"95"}}),e("el-table-column",{attrs:{prop:"status_text",label:"状态",width:"95"}}),e("el-table-column",{attrs:{label:"操作",width:"140px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button-group",[t.permission.pass?e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.passInfo(a.row.id)}}},[t._v("受理")]):t._e(),t.permission.reject?e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.rejectInfo(a.row.id)}}},[t._v("驳回")]):t._e()],1)]}}])})],1),e("div",{staticClass:"pagination-container"},[e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{background:"","current-page":t.page,"page-sizes":[10,15,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.pageSizeChange,"current-change":t.pageChange}})],1),e("el-dialog",{attrs:{title:"信息比对",visible:t.addDialogVisible},on:{"update:visible":function(e){t.addDialogVisible=e}}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form",{attrs:{"label-width":"100px",size:"small"}},[e("el-form-item",{attrs:{label:" "}},[e("span",{staticStyle:{color:"#F56C6C"}},[t._v("申请信息")])]),e("el-form-item",{attrs:{label:" ",prop:"code"}},[e("span",[t._v("-")])]),e("el-form-item",{attrs:{label:"单位名称",prop:"name"}},[e("span",[t._v(t._s(t.currentItem.name))])]),e("el-form-item",{attrs:{label:"联系人",prop:"linkman"}},[e("span",[t._v(t._s(t.currentItem.linkman))])]),e("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[e("span",[t._v(t._s(t.currentItem.mobile))])]),e("el-form-item",{attrs:{label:"服务商电话",prop:"tel"}},[e("span",[t._v(t._s(t.currentItem.tel))])]),e("el-form-item",{attrs:{label:"地图坐标",prop:"lat"}},[e("span",[t._v(t._s(t.oInfo.lat)+","+t._s(t.oInfo.lng))])]),e("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[e("span",[t._v(t._s(t.currentItem.address))])]),e("el-form-item",{attrs:{label:"授权区域",prop:"area"}},[e("span",[t._v(t._s(t.currentItem.area_text))])])],1)],1),e("el-col",{attrs:{span:12}},[e("el-form",{attrs:{"label-width":"100px",size:"small"}},[e("el-form-item",{attrs:{label:" "}},[e("span",{staticStyle:{color:"#67C23A"}},[t._v("原信息")])]),e("el-form-item",{attrs:{label:"客户号",prop:"code"}},[e("span",[t._v(t._s(t.oInfo.code))])]),e("el-form-item",{attrs:{label:"单位名称",prop:"name"}},[e("span",[t._v(t._s(t.oInfo.name))])]),e("el-form-item",{attrs:{label:"联系人",prop:"linkman"}},[e("span",[t._v(t._s(t.oInfo.linkman))])]),e("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[e("span",[t._v(t._s(t.oInfo.mobile))])]),e("el-form-item",{attrs:{label:"服务商电话",prop:"tel"}},[e("span",[t._v(t._s(t.oInfo.tel))])]),e("el-form-item",{attrs:{label:"地图坐标",prop:"lat"}},[e("span",[t._v(t._s(t.oInfo.lat)+","+t._s(t.oInfo.lng))])]),e("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[e("span",[t._v(t._s(t.oInfo.address))])]),e("el-form-item",{attrs:{label:"授权区域",prop:"area"}},[e("span",[t._v(t._s(t.oInfo.area_text))])])],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.passInfo(t.currentItem.id)}}},[t._v("受理")]),e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.rejectInfo(t.currentItem.id)}}},[t._v("驳回")]),e("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("关闭")])],1)],1)],1)},l=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("0e0b"),s=a("12a0");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"CustomApplyIndex",components:{Region:s["a"]},data:function(){return{permission:{pass:this.$checkAuth("CustomApplyPass"),reject:this.$checkAuth("CustomApplyReject")},page:1,pageSize:10,total:0,tableList:[],map:{status:1},loading:!1,exportLoading:!1,addDialogVisible:!1,currentId:0,currentItem:{},selectedIds:[],oInfo:{},statusList:[{label:"驳回",value:0},{label:"待审核",value:1},{label:"已受理",value:2}]}},created:function(){this.getList()},methods:{showAllImage:function(t){},showOldInfo:function(t){var e=this;this.currentItem={},this.oInfo={},this.loading||(this.loading=!0,this.$ajax.post("/api/custom_apply/oldCustom",{id:t.id}).then((function(a){e.currentItem=t,e.oInfo=a,e.addDialogVisible=!0})).finally((function(){e.loading=!1})))},handleSelectionChange:function(t){0!==t.length?this.selectedIds=t.map((function(t){return t.id})):this.selectedIds=[]},passInfo:function(t){var e=this;this.$confirm("受理后将更新渠道商为现申请信息，确认受理?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading||(e.loading=!0,e.$ajax.post("/api/custom_apply/pass",{ids:e.selectedIds,id:t}).then((function(t){e.getList(),e.$notify({title:"成功",message:"受理成功",type:"success",duration:2e3})})).finally((function(){e.loading=!1})))}))},rejectInfo:function(t){var e=this;this.$confirm("确认驳回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading||(e.loading=!0,e.$ajax.post("/api/custom_apply/reject",{ids:e.selectedIds,id:t}).then((function(t){e.getList(),e.$notify({title:"成功",message:"驳回成功",type:"success",duration:2e3})})).finally((function(){e.loading=!1})))}))},getList:function(){var t=this;this.loading=!0,this.$ajax.post("/api/custom_apply/index",c({page:this.page,pageSize:this.pageSize},this.map)).then((function(e){t.tableList=e.data,t.total=e.total})).finally((function(){t.loading=!1}))},pageSizeChange:function(t){this.pageSize=t,this.getList()},pageChange:function(t){this.page=t,this.getList()},handleFilter:function(){this.page=1,this.getList()},exportExcel:function(t){var e=this;if(!this.exportLoading){this.exportLoading=!0;var a=1===t?"10000":this.pageSize,n=1===t?1:this.page;this.$ajax.post("/api/custom_apply/index",c({page:n,pageSize:a},this.map)).then((function(t){var a=["单位名称","联系人","联系电话","服务商电话","联系地址","提交时间"],n=t.data.map((function(t){return[t.name,t.linkman,t.mobile,t.tel,t.address,t.create_time]}));Object(i["a"])({header:a,data:n,filename:"渠道商审核信息"}).finally((function(){e.exportLoading=!1}))})).catch((function(){e.exportLoading=!1}))}}}},d=p,u=(a("3e16"),a("2877")),m=Object(u["a"])(d,n,l,!1,null,"1aaff348",null);e["default"]=m.exports}}]);