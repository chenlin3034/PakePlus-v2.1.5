(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b9556d2"],{"0f46":function(e,t,i){},"2c49":function(e,t,i){},8256:function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:e.fullscreen}},[t("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}})])},a=[],o=(i("a481"),i("c5f6"),i("4365")),r=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],s=r,l=["fullscreen preview fontselect fontsizeselect bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor"],c=l,d=i("4020"),u={name:"Tinymce",props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360},readonly:{type:Boolean,default:!1}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},watch:{value:function(e){!this.hasChange&&this.hasInit&&window.tinymce.get(this.tinymceId).setContent(e||"")}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{add_fontfamily:function(e){return e["font_formats"]="微软雅黑='微软雅黑';宋体='宋体';黑体='黑体';仿宋='仿宋';楷体='楷体';隶书='隶书';幼圆='幼圆';Arial='Arial';",e},initTinymce:function(){var e=this,t=this;window.tinymce.init({deprecation_warnings:!1,language:"zh_CN",selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",readonly:this.readonly,object_resizing:!1,toolbar:!this.readonly&&(this.toolbar.length>0?this.toolbar:c),menubar:this.menubar,plugins:s,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,min_height:500,max_height:800,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,relative_urls:!1,content_style:"img {max-width:100%;height:auto;}",images_upload_url:o["a"]+"/upload/image",images_upload_handler:this.imageUplaodHandle,nonbreaking_force_tab:!0,font_formats:"Arial=arial;微软雅黑='微软雅黑';宋体='宋体';黑体='黑体';仿宋='仿宋';楷体='楷体';隶书='隶书';幼圆='幼圆'",fontsize_formats:"10px 12px 14px 18px 20px 24px 36px",placeholder:"请输入...",init_instance_callback:function(i){t.value&&i.setContent(t.value),t.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",i.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},getText:function(e){var t=window.tinymce.get(this.tinymceId).getContent({format:"text"});return e?t.replace(/[\n|\t|\s]+/g,""):t},imageUplaodHandle:function(e,t,i,n){var a=new FormData;a.append("file",e.blob(),e.filename()),d["a"].post("/api/upload/file",a,{onUploadProgress:function(e){n(e.loaded/e.total*100)}}).then((function(e){t(e.url)})).catch((function(e){403!==e.code&&200===e.code||i("HTTP Error: "+e.message,{remove:!0})}))}}},p=u,m=(i("c922"),i("d04c"),i("2877")),f=Object(m["a"])(p,n,a,!1,null,"d9ea5be2",null);t["a"]=f.exports},aa77:function(e,t,i){var n=i("5ca1"),a=i("be13"),o=i("79e5"),r=i("fdef"),s="["+r+"]",l="​",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(e,t,i){var a={},s=o((function(){return!!r[e]()||l[e]()!=l})),c=a[e]=s?t(p):r[e];i&&(a[i]=c),n(n.P+n.F*s,"String",a)},p=u.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},b18d:function(e,t,i){},c5f6:function(e,t,i){"use strict";var n=i("7726"),a=i("69a8"),o=i("2d95"),r=i("5dbc"),s=i("6a99"),l=i("79e5"),c=i("9093").f,d=i("11e9").f,u=i("86cc").f,p=i("aa77").trim,m="Number",f=n[m],h=f,g=f.prototype,b=o(i("2aeb")(g))==m,y="trim"in String.prototype,w=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():p(t,3);var i,n,a,o=t.charCodeAt(0);if(43===o||45===o){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var r,l=t.slice(2),c=0,d=l.length;c<d;c++)if(r=l.charCodeAt(c),r<48||r>a)return NaN;return parseInt(l,n)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof f&&(b?l((function(){g.valueOf.call(i)})):o(i)!=m)?r(new h(w(t)),i,f):w(t)};for(var v,_=i("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;_.length>I;I++)a(h,v=_[I])&&!a(f,v)&&u(f,v,d(h,v));f.prototype=g,g.constructor=f,i("2aba")(n,m,f)}},c922:function(e,t,i){"use strict";i("b18d")},ca52:function(e,t,i){"use strict";i("2c49")},cf89:function(e,t,i){"use strict";i.r(t);i("7f7f");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[e.permission.create?t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("添加")]):e._e(),t("el-input",{staticClass:"filter-item",staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"产品名称"},model:{value:e.map.name,callback:function(t){e.$set(e.map,"name",t)},expression:"map.name"}}),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),t("el-popconfirm",{staticClass:"filter-item",attrs:{title:"确认导出到excel表格？"},on:{confirm:e.exportExcel}},[t("el-button",{attrs:{slot:"reference",type:"primary",disabled:e.exportLoading},slot:"reference"},[e._v("导出")])],1)],1),t("el-table",{attrs:{border:"","highlight-current-row":"",data:e.tableList}},[t("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"100"}}),t("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),t("el-table-column",{attrs:{prop:"type.name",label:"产品分类"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),t("el-table-column",{attrs:{label:"操作",width:"190px"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button-group",[e.permission.edit?t("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.handleEdit(i.row)}}},[e._v("编辑")]):e._e(),e.permission.delete?t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteItem(i.row.id)}}},[e._v("删除")]):e._e()],1)]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{background:"","current-page":e.page,"page-sizes":[10,15,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageChange}})],1),t("el-dialog",{attrs:{title:"产品|添加/编辑",visible:e.addDialogVisible,"append-to-body":"",width:"80%",top:"3vh"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[e.addDialogVisible?t("edit-temp",{attrs:{item:e.newItem,typeList:e.typeList},on:{cancel:function(t){e.addDialogVisible=!1},success:e.getList}}):e._e()],1)],1)},a=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("ade3")),r=i("0e0b"),s=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"newItem",attrs:{model:e.newItem,rules:e.newItemRules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"产品分类",prop:"type_id"}},[t("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"产品分类",clearable:"",filterable:""},model:{value:e.newItem.type_id,callback:function(t){e.$set(e.newItem,"type_id",t)},expression:"newItem.type_id"}},e._l(e.typeList,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"备注"},model:{value:e.newItem.remark,callback:function(t){e.$set(e.newItem,"remark",t)},expression:"newItem.remark"}})],1),t("el-form-item",{attrs:{label:"产品介绍",prop:"content"}},[t("tinymce",{ref:"exampleContent",model:{value:e.newItem.content,callback:function(t){e.$set(e.newItem,"content",t)},expression:"newItem.content"}})],1),t("el-form-item",{attrs:{label:" "}},[t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],on:{click:e.cancelHandle}},[e._v("取 消")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.confirmCreateItem}},[e._v("确 定")])],1)],1)],1)},l=[],c=(i("c5f6"),i("8256")),d={name:"PeriphGoodsEdit",props:{goodId:{type:Number,default:0},item:{type:Object,default:function(){return{}}},typeList:{type:Array,default:function(){return[]}}},components:{Tinymce:c["a"]},data:function(){return{loading:!1,newItem:{name:"",producer:"",factory_id:"",producer_tel:"",idnumber:"",content:""},newItemRules:{type_id:[{required:!0,message:"请选择产品分类"}],name:[{required:!0,message:"请输入产品名称"}],content:[{required:!0,message:"请输入产品详情"}]}}},created:function(){this.item&&this.item.id?this.newItem=Object.assign({},this.item):this.newItem={name:"",content:""},this.goodId&&(this.newItem.pid=this.goodId)},methods:{cancelHandle:function(){this.$emit("cancel")},success:function(){this.$emit("success")},confirmCreateItem:function(){var e=this;this.$refs.newItem.validate((function(t){t&&(e.newItem.id?e.editItem():e.addItem())}))},editItem:function(){var e=this;this.loading||(this.loading=!0,this.$ajax.post("/api/periph/update/id/"+this.newItem.id,this.newItem).then((function(t){e.success(),e.$notify({title:"成功",message:"编辑成功",type:"success",duration:2e3})})).finally((function(){e.loading=!1})))},addItem:function(){var e=this;this.loading||(this.loading=!0,this.$ajax.post("/api/periph/add",this.newItem).then((function(t){e.success(),e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3})})).finally((function(){e.loading=!1})))}}},u=d,p=i("2877"),m=Object(p["a"])(u,s,l,!1,null,null,null),f=m.exports;function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b={name:"PeriphGoodsIndex",components:{EditTemp:f},data:function(){return{permission:{create:this.$checkAuth("PeriphGoodsCreate"),edit:this.$checkAuth("PeriphGoodsEdit"),delete:this.$checkAuth("PeriphGoodsDelete")},page:1,pageSize:10,total:0,tableList:[],map:{},loading:!1,exportLoading:!1,addDialogVisible:!1,pinguiDialogVisible:!1,currentId:0,newItem:{},typeList:[]}},created:function(){this.getList(),this.getTypeList()},methods:{handleCreate:function(){this.newItem={},this.addDialogVisible=!0},handleEdit:function(e){this.newItem=e,this.addDialogVisible=!0},getTypeList:function(){var e=this;this.$ajax.post("/api/periphType/index",{show:1}).then((function(t){e.typeList=t}))},getList:function(){var e=this;this.addDialogVisible=!1,this.loading=!0,this.$ajax.post("/api/periph/index",g({page:this.page,pageSize:this.pageSize},this.map)).then((function(t){e.loading=!1,e.tableList=t.data,e.total=t.total})).catch((function(){e.loading=!1}))},pageSizeChange:function(e){this.pageSize=e,this.getList()},pageChange:function(e){this.page=e,this.getList()},handleFilter:function(){this.page=1,this.getList()},deleteItem:function(e){var t=this;this.$confirm("此操作将永久删除该品种, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading||(t.loading=!0,t.$ajax.post("/api/periph/delete/id/"+e).then((function(e){t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.getList()})).finally((function(){t.loading=!1})))}))},exportExcel:function(){var e=this;this.exportLoading||(this.exportLoading=!0,this.$ajax.post("/api/periph/index",g({page:1,pageSize:1e3,pid:""},this.map)).then((function(t){var i=["产品名称","产品介绍","创建时间"],n=t.data.map((function(e){return[e.name,e.content,e.create_time]}));Object(r["a"])({header:i,data:n,filename:"产品信息"}).finally((function(){e.exportLoading=!1}))})).catch((function(){e.exportLoading=!1})))}}},y=b,w=(i("ca52"),Object(p["a"])(y,n,a,!1,null,"2eabfd41",null));t["default"]=w.exports},d04c:function(e,t,i){"use strict";i("0f46")},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);