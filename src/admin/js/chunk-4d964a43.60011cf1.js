(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d964a43"],{2502:function(e,t,n){},"2a81":function(e,t,n){},7931:function(e,t,n){"use strict";n("2502")},"9ed6":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-form"},[e._m(0),t("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"用户名登录",name:"first"}},[t("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[t("el-form-item",{attrs:{prop:"username"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{attrs:{placeholder:"用户名",name:"username",type:"text","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{attrs:{type:e.passwordType,placeholder:"密码",name:"password","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1)],1),t("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v("登录\n        ")])],1)],1)],1)])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v("后台管理系统")])])}],a=(n("7f7f"),n("0a5a")),s={name:"Login",data:function(){var e=function(e,t,n){t.length<6?n(new Error("密码最少6位")):n()};return{activeName:"first",loginForm:{username:"",password:""},loginRules:{username:[{required:!0,type:"string",trigger:"blur",message:"请填写用户名"}],password:[{required:!0,trigger:"blur",validator:e}]},passwordType:"password",loading:!1,redirect:void 0,qrcodeLogin:!1,qrCodeState:""}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},mounted:function(){},methods:{tabClick:function(e){this.qrcodeLogin="second"===e.name,this.qrcodeLogin&&this.wxInit()},wxInit:function(){this.qrCodeState=Date.parse(new Date+"")/1e3,new WxLogin({self_redirect:!0,id:"wxlogin",appid:"wx428f58bfb00d6fb8",scope:"snsapi_login",redirect_uri:encodeURIComponent("https://www.zhongjuce.com/openlogin/weixin.html?a=weixinlogin"),state:this.qrCodeState,style:"black",href:""})},showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},loginByCode:function(e,t){var n=this;this.$ajax.get("/gov/user/weixin-login",{params:{type:e,code:t}}).then((function(e){Object(a["e"])(e.user),n.$store.commit("SET_USER",e.user),n.$store.commit("SET_NAME",e.user.name),n.$router.push({path:n.redirect||"/"})})).catch((function(){n.wxInit()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0,e.$ajax.post("/api/login/login",e.loginForm).then((function(t){Object(a["e"])(t),e.$store.commit("SET_USER",t),e.$store.commit("SET_NAME",t.realname),e.$router.push({path:e.redirect||"/"})})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))}))}}},r=s,l=(n("ff3a"),n("7931"),n("2877")),c=Object(l["a"])(r,o,i,!1,null,"8a6465a6",null);t["default"]=c.exports},ff3a:function(e,t,n){"use strict";n("2a81")}}]);