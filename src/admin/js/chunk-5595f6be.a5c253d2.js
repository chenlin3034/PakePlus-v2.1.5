(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5595f6be"],{"0e05":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return s}));var a=function(e,t,i){if(t){var a=/^1[3456789]\d{9}$/;a.test(t)?i():i(new Error("手机号格式错误"))}else i()},n=function(e,t,i){if(t){var a=/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/;a.test(t)?i():i(new Error("电话号格式错误"))}else i()},s=function(e,t,i){if(t){var a=/^1[3456789]\d{9}$/,n=/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/;a.test(t)||n.test(t)?i():i(new Error("电话号格式错误"))}else i()}},"28a5":function(e,t,i){"use strict";var a=i("aae3"),n=i("cb7c"),s=i("ebd6"),r=i("0390"),l=i("9def"),o=i("5f1b"),u=i("520a"),c=i("79e5"),p=Math.min,d=[].push,m="split",f="length",g="lastIndex",h=4294967295,b=!c((function(){RegExp(h,"y")}));i("214f")("split",2,(function(e,t,i,c){var w;return w="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[f]||2!="ab"[m](/(?:ab)*/)[f]||4!="."[m](/(.?)(.?)/)[f]||"."[m](/()()/)[f]>1||""[m](/.?/)[f]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!a(e))return i.call(n,e,t);var s,r,l,o=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=void 0===t?h:t>>>0,b=new RegExp(e.source,c+"g");while(s=u.call(b,n)){if(r=b[g],r>p&&(o.push(n.slice(p,s.index)),s[f]>1&&s.index<n[f]&&d.apply(o,s.slice(1)),l=s[0][f],p=r,o[f]>=m))break;b[g]===s.index&&b[g]++}return p===n[f]?!l&&b.test("")||o.push(""):o.push(n.slice(p)),o[f]>m?o.slice(0,m):o}:"0"[m](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)}:i,[function(i,a){var n=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,n,a):w.call(String(n),i,a)},function(e,t){var a=c(w,e,this,t,w!==i);if(a.done)return a.value;var u=n(e),d=String(this),m=s(u,RegExp),f=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(b?"y":"g"),v=new m(b?u:"^(?:"+u.source+")",g),I=void 0===t?h:t>>>0;if(0===I)return[];if(0===d.length)return null===o(v,d)?[d]:[];var y=0,x=0,_=[];while(x<d.length){v.lastIndex=b?x:0;var k,$=o(v,b?d:d.slice(x));if(null===$||(k=p(l(v.lastIndex+(b?0:x)),d.length))===y)x=r(d,x,f);else{if(_.push(d.slice(y,x)),_.length===I)return _;for(var S=1;S<=$.length-1;S++)if(_.push($[S]),_.length===I)return _;x=y=k}}return _.push(d.slice(y)),_}]}))},e382:function(e,t,i){"use strict";i.r(t);i("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"用户名"},model:{value:e.map.username,callback:function(t){e.$set(e.map,"username",t)},expression:"map.username"}}),t("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"真实姓名"},model:{value:e.map.name,callback:function(t){e.$set(e.map,"name",t)},expression:"map.name"}}),t("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"角色",clearable:""},model:{value:e.map.group_ids,callback:function(t){e.$set(e.map,"group_ids",t)},expression:"map.group_ids"}},e._l(e.authGroupList,(function(e,i){return t("el-option",{key:i,attrs:{label:e.title,value:e.id}})})),1),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e.permission.create?t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("添加")]):e._e()],1),t("el-table",{attrs:{border:"","highlight-current-row":"",data:e.tableList}},[t("el-table-column",{attrs:{align:"center",label:"序号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index+1)+"\n      ")]}}])}),t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),t("el-table-column",{attrs:{prop:"realname",label:"真实姓名"}}),t("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),t("el-table-column",{attrs:{prop:"status_name",align:"center",label:"状态",width:"80"}}),t("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button-group",[e.permission.edit?t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.updateItem(i.row)}}},[e._v("编辑")]):e._e(),1!==i.row.id&&e.permission.delete?t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.delItem(i.row.id)}}},[e._v("删除")]):e._e()],1)]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{background:"","current-page":e.page,"page-sizes":[10,15,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageChange}})],1),t("el-dialog",{attrs:{title:"管理员",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"newItem",attrs:{model:e.newItem,rules:e.newItemRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{disabled:!!e.newItem.id,autocomplete:"off"},model:{value:e.newItem.username,callback:function(t){e.$set(e.newItem,"username",t)},expression:"newItem.username"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newItem.mobile,callback:function(t){e.$set(e.newItem,"mobile",t)},expression:"newItem.mobile"}})],1),t("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newItem.realname,callback:function(t){e.$set(e.newItem,"realname",t)},expression:"newItem.realname"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.newItem.password,callback:function(t){e.$set(e.newItem,"password",t)},expression:"newItem.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"repassword"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.newItem.repassword,callback:function(t){e.$set(e.newItem,"repassword",t)},expression:"newItem.repassword"}})],1),t("el-form-item",{attrs:{label:"权限组",prop:"auth_group"}},[t("el-checkbox-group",{model:{value:e.group_ids,callback:function(t){e.group_ids=t},expression:"group_ids"}},e._l(e.authGroupList,(function(i){return t("el-checkbox",{key:i.id,attrs:{label:i.id+""}},[e._v(e._s(i.title))])})),1)],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.newItem.status,callback:function(t){e.$set(e.newItem,"status",t)},expression:"newItem.status"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmCreateItem}},[e._v("确 定")])],1)],1)],1)},n=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("28a5"),i("ade3")),r=i("0e05");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={name:"Solution",data:function(){var e=this,t=function(t,i,a){""!==e.newItem.repassword&&e.$refs.newItem.validateField("repassword"),a()},i=function(t,i,a){""===i?a(new Error("请再次输入密码")):i!==e.newItem.password?a(new Error("两次输入密码不一致!")):a()};return{permission:{create:this.$checkAuth("UserCreate"),edit:this.$checkAuth("UserEdit"),delete:this.$checkAuth("UserDelete")},page:1,pageSize:10,total:0,tableList:[],map:{},loading:!1,statusList:[{label:"启用",value:1},{label:"禁用",value:0}],dialogVisible:!1,authGroupList:[],depList:[],depSelect:[],group_ids:[],newItem:{},newItemRules:{username:[{required:!0,message:"用户名必填"},{min:6,message:"长度最少6位"}],mobile:[{validator:r["a"]}],realname:[{min:2,message:"长度最少5位"}],password:[{validator:t,trigger:"blur"},{min:6,message:"长度最少6位"}],repassword:[{validator:i}]}}},created:function(){this.getList(),this.getAuthGroup()},activated:function(){this.getList()},methods:{getAuthGroup:function(){var e=this;this.$ajax.get("/api/group").then((function(t){e.authGroupList=t}))},handleCreate:function(){this.newItem={status:1},this.group_ids=[],this.depSelect=[],this.dialogVisible=!0},getList:function(){var e=this;this.loading=!0,this.$ajax.post("/api/admin",o({page:this.page,pageSize:this.pageSize},this.map)).then((function(t){e.loading=!1,e.tableList=t.data,e.total=t.total})).catch((function(){e.loading=!1}))},pageSizeChange:function(e){this.pageSize=e,this.getList()},pageChange:function(e){this.page=e,this.getList()},handleFilter:function(){this.page=1,this.getList()},delItem:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$ajax.delete("/api/admin/id/"+e).then((function(){t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.getList()}))}))},updateItem:function(e){this.group_ids=e.groups?e.groups.split(","):[];var t=e.gov_dep_ids?e.gov_dep_ids.split(","):[];this.depSelect=t.map((function(e){return parseInt(e)})),this.newItem=e,this.dialogVisible=!0},upItem:function(e,t){var i=this;this.$ajax.post("/api/admin/update/id/"+t,e).then((function(e){i.$message({message:"更新成功",type:"success"}),i.dialogVisible=!1,i.getList()}))},confirmCreateItem:function(){var e=this;if(this.newItem.group_ids=this.group_ids,this.newItem.id)return this.upItem(this.newItem,this.newItem.id),!1;this.$refs.newItem.validate((function(t){t&&(e.loading=!0,e.$ajax.post("/api/admin/add",e.newItem).then((function(t){e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.dialogVisible=!1,e.getList()})).finally((function(){e.loading=!1})))}))}}},c=u,p=i("2877"),d=Object(p["a"])(c,a,n,!1,null,"42582612",null);t["default"]=d.exports}}]);