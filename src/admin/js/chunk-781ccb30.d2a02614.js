(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-781ccb30"],{7274:function(e,t,n){},7424:function(e,t,n){"use strict";n.r(t);n("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.currentGroupName,callback:function(t){e.currentGroupName=t},expression:"currentGroupName"}},[e._l(e.config,(function(n,a){return t("el-tab-pane",{key:a,attrs:{label:n.title,name:n.name}},[n.name===e.currentGroupName?t("el-form",{attrs:{"label-position":"top"}},[e._l(n.list,(function(n,a){return t("el-form-item",{key:a,attrs:{label:n.title,prop:n.name}},[t("el-input",{staticClass:"input-item",attrs:{placeholder:n.tip},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"item.value"}},[e.permission.delete?t("el-button",{attrs:{slot:"append",icon:"el-icon-close",title:"删除"},on:{click:function(t){return e.deleteHandle(n.id)}},slot:"append"}):e._e()],1)],1)})),t("el-form-item",{attrs:{label:" "}},[e.permission.edit&&n.list.length>0?t("el-button",{attrs:{type:"primary"},on:{click:e.updateHandle}},[e._v("确 定")]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:0===n.list.length,expression:"group.list.length === 0"}],staticStyle:{color:"#909399"}},[e._v("请先添加配置")])],1)],2):e._e()],1)})),e.permission.create?t("el-tab-pane",{attrs:{label:"添加配置",name:"addGroupForm"}},[t("el-form",{ref:"newForm",attrs:{model:e.newItem,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"配置组",prop:"group"}},[t("el-select",{model:{value:e.newItem.group,callback:function(t){e.$set(e.newItem,"group",t)},expression:"newItem.group"}},e._l(e.config,(function(e,n){return t("el-option",{key:e.name,attrs:{label:e.title,value:e.name}})})),1)],1),t("el-form-item",{attrs:{label:"配置标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"配置标题"},model:{value:e.newItem.title,callback:function(t){e.$set(e.newItem,"title",t)},expression:"newItem.title"}})],1),t("el-form-item",{attrs:{label:"配置名",prop:"name"}},[t("el-input",{attrs:{placeholder:"配置名"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1),t("el-form-item",{attrs:{label:"配置值",prop:"value"}},[t("el-input",{attrs:{placeholder:"配置值"},model:{value:e.newItem.value,callback:function(t){e.$set(e.newItem,"value",t)},expression:"newItem.value"}})],1),t("el-form-item",{attrs:{label:"提示信息",prop:"tip"}},[t("el-input",{attrs:{placeholder:"提示信息"},model:{value:e.newItem.tip,callback:function(t){e.$set(e.newItem,"tip",t)},expression:"newItem.tip"}})],1),t("el-form-item",{attrs:{label:" "}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addHandle}},[e._v("添 加")])],1)],1)],1):e._e()],2)],1)},i=[],l=(n("ac6a"),n("456d"),{name:"SettingIndex",data:function(){return{permission:{create:this.$checkAuth("SettingCreate"),edit:this.$checkAuth("SettingEdit"),delete:this.$checkAuth("SettingDelete")},currentGroupName:"",config:[],currentItem:{},newItem:{group:"",title:"",name:"",value:"",tip:""},rules:{title:[{required:!0,message:"配置标题必填"}],name:[{required:!0,message:"配置名称必填"}],group:[{required:!0,message:"配置组必选"}]}}},created:function(){this.getConfig()},methods:{deleteHandle:function(e){var t=this;this.$confirm("删除后不可恢复，确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.deleteItem(e)}))},deleteItem:function(e){var t=this;this.loading=!0,this.$ajax.post("/api/config/delete",{id:e}).then((function(e){t.$message.success("删除成功"),t.getConfig()})).finally((function(){t.loading=!1}))},addHandle:function(){var e=this;this.$refs.newForm.validate((function(t){t&&e.addItem()}))},addItem:function(){var e=this;this.loading||(this.loading=!0,this.$ajax.post("/api/config/add",this.newItem).then((function(t){e.$message.success("添加成功"),e.newItem={group:"",title:"",name:"",value:"",tip:""},e.getConfig()})).finally((function(){e.loading=!1})))},updateHandle:function(){var e=this,t=this.config[this.currentGroupName];t&&t.list&&0!==t.list.length?this.loading||(this.loading=!0,this.$ajax.post("/api/config/update",t).then((function(t){e.$message.success("更新成功"),e.getConfig()})).finally((function(){e.loading=!1}))):this.$message.error("请先添加配置项")},handleClick:function(e){this.currentGroupName=e.name},getConfig:function(){var e=this;this.$ajax.post("/api/config/index").then((function(t){e.config=t,e.currentGroupName=Object.keys(t)[0]}))}}}),o=l,r=(n("ed0c"),n("2877")),s=Object(r["a"])(o,a,i,!1,null,"61687fbe",null);t["default"]=s.exports},ed0c:function(e,t,n){"use strict";n("7274")}}]);