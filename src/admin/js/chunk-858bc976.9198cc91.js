(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-858bc976"],{"5c44":function(e,t,a){},a4ad:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[e.permission.create?t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("召回")]):e._e(),t("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"批号"},model:{value:e.map.batch_code,callback:function(t){e.$set(e.map,"batch_code",t)},expression:"map.batch_code"}}),t("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"出库单号"},model:{value:e.map.out_code,callback:function(t){e.$set(e.map,"out_code",t)},expression:"map.out_code"}}),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")])],1),t("el-table",{attrs:{border:"","highlight-current-row":"",data:e.tableList}},[t("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"100"}}),t("el-table-column",{attrs:{prop:"batch_code",label:"批号"}}),t("el-table-column",{attrs:{prop:"out_code",label:"出库单"}}),t("el-table-column",{attrs:{prop:"status_name",label:"状态"}}),t("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),t("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button-group",[e.permission.qrcode?t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.lookQrcode(a.row.id)}}},[e._v("查看二维码")]):e._e(),e.permission.delete?t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteHandle(a.row.id)}}},[e._v("撤销召回")]):e._e()],1)]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{background:"","current-page":e.page,"page-sizes":[10,15,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageChange}})],1),t("el-dialog",{attrs:{title:"召回",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[t("el-form",{ref:"newItem",attrs:{model:e.newItem,rules:e.newItemRules,"label-width":"100px","append-to-body":""}},[t("el-form-item",{attrs:{label:"批号",prop:"batch_code"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.newItem.batch_code,callback:function(t){e.$set(e.newItem,"batch_code",t)},expression:"newItem.batch_code"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.confirmCreateItem}},[e._v("召 回")])],1)],1),t("el-dialog",{attrs:{title:"查看二维码","close-on-click-modal":!1,visible:e.qrcodeDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.qrcodeDialogVisible=t}}},[e.qrcodeDialogVisible?t("qrcode-list",{attrs:{recall_id:e.currentId}}):e._e()],1)],1)},n=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"单元识别码"},model:{value:e.map.keyword,callback:function(t){e.$set(e.map,"keyword",t)},expression:"map.keyword"}}),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-refresh"},on:{click:e.handleFilter}},[e._v("刷新")])],1),t("el-table",{attrs:{border:"","highlight-current-row":"",data:e.tableList}},[t("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"100"}}),t("el-table-column",{attrs:{prop:"qrcode",label:"单元识别码"}}),t("el-table-column",{attrs:{prop:"out_code",label:"出库单号"}}),t("el-table-column",{attrs:{prop:"add_time",label:"添加时间"}})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{background:"","current-page":e.page,"page-sizes":[10,15,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageChange}})],1)],1)},l=[];a("c5f6");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"RecallQrcodeList",props:{recall_id:{type:[String,Number],default:""}},data:function(){return{permission:{},batch_id:"",page:1,pageSize:10,total:0,tableList:[],map:{},loading:!1,exportLoading:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.$ajax.get("/api/recall/qrcode?recall_id="+this.recall_id,{params:s({page:this.page,pageSize:this.pageSize},this.map)}).then((function(t){e.loading=!1,e.tableList=t.data,e.total=t.total})).catch((function(){e.loading=!1}))},pageSizeChange:function(e){this.pageSize=e,this.getList()},pageChange:function(e){this.page=e,this.getList()},handleFilter:function(){this.page=1,this.getList()}}},d=p,u=a("2877"),g=Object(u["a"])(d,o,l,!1,null,"a894d07e",null),h=g.exports;function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={name:"RecallIndex",components:{qrcodeList:h},data:function(){return{permission:{create:this.$checkAuth("RecallCreate"),qrcode:this.$checkAuth("RecallQrcode"),delete:this.$checkAuth("RecallDelete")},page:1,pageSize:10,total:0,tableList:[],map:{},loading:!1,addDialogVisible:!1,qrcodeDialogVisible:!1,currentId:"",newItem:{batch_code:""},newItemRules:{batch_code:[{required:!0,message:"请输入批号"}]},statusList:[{label:"召回中",value:"0"},{label:"已召回",value:"1"}]}},created:function(){this.getList()},methods:{handleCreate:function(){this.newItem={batch_code:""},this.addDialogVisible=!0},lookQrcode:function(e){this.currentId=e,this.qrcodeDialogVisible=!0},confirmCreateItem:function(){var e=this;this.$refs.newItem.validate((function(t){t&&e.addItem()}))},addItem:function(){var e=this;this.loading||(this.loading=!0,this.$ajax.post("/api/recall/add",this.newItem).then((function(t){e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.addDialogVisible=!1,e.getList()})).finally((function(){e.loading=!1})))},getList:function(){var e=this;this.loading=!0,this.$ajax.post("/api/recall/index",b({page:this.page,pageSize:this.pageSize},this.map)).then((function(t){e.loading=!1,e.tableList=t.data,e.total=t.total})).catch((function(){e.loading=!1}))},pageSizeChange:function(e){this.pageSize=e,this.getList()},pageChange:function(e){this.page=e,this.getList()},handleFilter:function(){this.page=1,this.getList()},deleteHandle:function(e){var t=this;this.$confirm("该操作不可恢复，确认撤销？","提示",{confirmButtonText:"撤销",cancelButtonText:"取消",type:"error"}).then((function(){t.$ajax.post("/api/recall/delete",{id:e}).then((function(e){t.$message.success("删除成功"),t.getList()}))}))}}},v=m,w=(a("a872"),Object(u["a"])(v,i,n,!1,null,"7becaac0",null));t["default"]=w.exports},a872:function(e,t,a){"use strict";a("5c44")},aa77:function(e,t,a){var i=a("5ca1"),n=a("be13"),r=a("79e5"),o=a("fdef"),l="["+o+"]",c="​",s=RegExp("^"+l+l+"*"),p=RegExp(l+l+"*$"),d=function(e,t,a){var n={},l=r((function(){return!!o[e]()||c[e]()!=c})),s=n[e]=l?t(u):o[e];a&&(n[a]=s),i(i.P+i.F*l,"String",n)},u=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(p,"")),e};e.exports=d},c5f6:function(e,t,a){"use strict";var i=a("7726"),n=a("69a8"),r=a("2d95"),o=a("5dbc"),l=a("6a99"),c=a("79e5"),s=a("9093").f,p=a("11e9").f,d=a("86cc").f,u=a("aa77").trim,g="Number",h=i[g],f=h,b=h.prototype,m=r(a("2aeb")(b))==g,v="trim"in String.prototype,w=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():u(t,3);var a,i,n,r=t.charCodeAt(0);if(43===r||45===r){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+t}for(var o,c=t.slice(2),s=0,p=c.length;s<p;s++)if(o=c.charCodeAt(s),o<48||o>n)return NaN;return parseInt(c,i)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof h&&(m?c((function(){b.valueOf.call(a)})):r(a)!=g)?o(new f(w(t)),a,h):w(t)};for(var y,_=a("9e1e")?s(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;_.length>O;O++)n(f,y=_[O])&&!n(h,y)&&d(h,y,p(f,y));h.prototype=b,b.constructor=h,a("2aba")(i,g,h)}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);