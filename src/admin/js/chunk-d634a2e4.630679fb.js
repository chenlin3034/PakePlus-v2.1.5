(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d634a2e4"],{"253f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"filter-container"},[e("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"产品编号"},model:{value:t.map.code,callback:function(e){t.$set(t.map,"code",e)},expression:"map.code"}}),e("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"扫码位置关键字"},model:{value:t.map.address,callback:function(e){t.$set(t.map,"address",e)},expression:"map.address"}}),e("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"扫码结果"},model:{value:t.map.status,callback:function(e){t.$set(t.map,"status",e)},expression:"map.status"}},t._l(t.statusList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.label,value:t.value}})})),1),e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),e("el-dropdown",{staticClass:"filter-item",attrs:{trigger:"click",disabled:t.exportLoading},on:{command:t.exportExcel}},[e("el-button",{attrs:{type:"primary"}},[t._v("\n        导出"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:0}},[t._v("导出本页")]),e("el-dropdown-item",{attrs:{command:1}},[t._v("导出全部")])],1)],1)],1),e("el-table",{attrs:{border:"","highlight-current-row":"",data:t.tableList}},[e("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"100"}}),e("el-table-column",{attrs:{prop:"qrcode",label:"产品编号",width:"120"}}),e("el-table-column",{attrs:{prop:"address",label:"扫码地区"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.address?e("span",[t._v(t._s(a.row.address))]):e("span",[t._v(t._s(a.row.province)+" "+t._s(a.row.city)+" "+t._s(a.row.county)+" "+t._s(a.row.township)+" "+t._s(a.row.street)+" "+t._s(a.row.streetNumber))])]}}])}),e("el-table-column",{attrs:{prop:"lnglat",label:"扫码坐标",width:"200"}}),e("el-table-column",{attrs:{prop:"status_text",label:"扫码结果",width:"80px"}}),e("el-table-column",{attrs:{prop:"create_time",label:"扫码时间",width:"160px"}}),e("el-table-column",{attrs:{prop:"tip",label:"扫码提示"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tooltip",{attrs:{placement:"top-start"}},[e("div",{staticStyle:{"max-width":"600px"},attrs:{slot:"content"},domProps:{innerHTML:t._s(a.row.tip)},slot:"content"}),e("span",[t._v(t._s(a.row.tip.substr(0,15)+"..."))])])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button-group",[t.permission.delete?e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.deleteItem(a.row.id)}}},[t._v("删除")]):t._e()],1)]}}])})],1),e("div",{staticClass:"pagination-container"},[e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{background:"","current-page":t.page,"page-sizes":[10,15,20,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.pageSizeChange,"current-change":t.pageChange}})],1)],1)},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),s=a("0e0b");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={name:"ScanlogIndex",components:{},data:function(){return{permission:{delete:this.$checkAuth("ScanlogDelete")},page:1,pageSize:10,total:0,tableList:[],map:{},loading:!1,exportLoading:!1,statusList:[{label:"异常",value:"0"},{label:"正品",value:"1"}]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,this.$ajax.post("/api/qrcode_scanlog/index",l({page:this.page,pageSize:this.pageSize},this.map)).then((function(e){t.loading=!1,t.tableList=e.data,t.total=e.total})).catch((function(){t.loading=!1}))},pageSizeChange:function(t){this.pageSize=t,this.getList()},pageChange:function(t){this.page=t,this.getList()},handleFilter:function(){this.page=1,this.getList()},deleteItem:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading||(e.loading=!0,e.$ajax.post("/api/qrcode_scanlog/delete/id/"+t).then((function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()})).finally((function(){e.loading=!1})))}))},exportExcel:function(t){var e=this;if(!this.exportLoading){this.exportLoading=!0;var a=1===t?"10000":this.pageSize,n=1===t?1:this.page;this.$ajax.post("/api/qrcode_scanlog/index",l({page:n,pageSize:a},this.map)).then((function(t){var a=["产品编号","扫码地区","扫码坐标","扫码结果","扫码时间","扫码提示"],n=t.data.map((function(t){var e=t.address?t.address:t.province+" "+t.city+" "+t.county+" "+t.township+" "+t.street+" "+t.streetNumber;return[t.qrcode,e,t.lnglat,t.status_text,t.create_time,t.tip]}));Object(s["a"])({header:a,data:n,filename:"追溯记录信息"}).finally((function(){e.exportLoading=!1}))})).catch((function(){e.exportLoading=!1}))}}}},p=c,d=(a("3742"),a("2877")),u=Object(d["a"])(p,n,i,!1,null,"c7fcb010",null);e["default"]=u.exports},3742:function(t,e,a){"use strict";a("fc00")},fc00:function(t,e,a){}}]);